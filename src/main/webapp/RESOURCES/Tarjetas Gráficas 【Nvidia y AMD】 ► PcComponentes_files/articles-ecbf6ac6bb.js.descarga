$(document).ready(function(){var c=$("#loading"),i=null,e=new PccMenuFilter({listen:!1}),r=new PccButtonMore,d=new PccSelectOrder,o=new PccCountArticles,s=$("#articleListContent"),n=$("#idQuery"),a=$(".c-product-card").css("height"),t=$(window),l=-1,p="";function u(a,t){t||c.show(),r.sleep(),d.sleep();a=e.get();return a.page=r.getPage(),a.order=d.val(),a.gtmTitle=r.getGTMList(),a[n.attr("data-key")]=[n.val()],i=$.ajax({url:r.getUrl(),data:a,method:"get"}).done(function(a,t,c){200==c.status?r.hide():r.show(),1<=r.getPage()&&r.hide(),o.set(c.getResponseHeader("totalItems")),l=c.getResponseHeader("totalPages")}).always(function(){r.wakeUp(),d.wakeUp(),i=null,c.hide()})}function g(t){i||(e.sleep(),r.advancePage(),u("more",!0).done(function(a){1==t?s.append(a):p=a,PCC.EventManager.emit("observeLazyImages",{module:"Holi"})}).always(function(){e.wakeUp(),PCC.EventManager.emit("observeLazyImages",{module:"Holi"})}))}function v(){promoData.allowAd&&$.ajax({url:promoURL+"article-promo",dataType:"json",crossDomain:!0,cors:!0,data:JSON.stringify({order:d.val(),idFamilies:[promoData.categoryId],attributeValues:promoData.filters,brandIds:promoData.brandIds,channel:promoData.channel,allowSponsored:!0,allowBanner:!0,enableAsyncTimeout:!1}),headers:{"Access-Control-Allow-Origin":"*"},contentType:"application/json",method:"post"}).done(function(a,t,c){var i,e;200===c.status&&(c=a.articles,a=a.banners,i=[1,3,5,7],(e=0)<c.length&&(c=(c=c.sort(function(a,t){return a.position-t.position})).filter(function(a){return a.hasOwnProperty("data")})).slice(0,i.length).forEach(function(a,t){var c=function(a,t){var c=' <img loading="lazy" class="c-product-card__image cy-product-image " src="//thumb.'+getDomainName()+".com/w-220-220/"+a.data.image+'" alt="'+a.data.name+'">',i='<header class="c-product-card__header"><h3 class="c-product-card__title"><a class="c-product-card__title-link cy-product-link" data-list="citrusad" href=/'+a.data.currentSlug+' data-name="'+a.data.name+'" data-id='+a.data.idArticle+" data-price="+a.data.price.price+' data-brand="'+a.data.trademark.name+'" data-category="'+a.data.family.name+'" data-stock-web="1" data-loop="'+t+'">'+a.data.name+"</a></h3></header>",e="<a href=/"+a.data.currentSlug+' data-list="citrusad" data-adid='+a.adId+' class="GTM-productClick enlace-superpuesto cy-product-hover-link" data-name="'+a.data.name+'" data-id='+a.data.idArticle+" data-price="+a.data.price.price+' data-brand="'+a.data.trademark.name+'" data-category="'+a.data.family.name+'" data-stock-web="1" data-loop="'+t+'"></a>',r=0;a.data.promotions.forEach(function(a){"special-day"!==a.type&&"black-friday"!==a.type||(r=a.data.stock)});var d=function(a){var t="";a.data.flags.includes("free-shipping")&&(t='<div class="c-card-product__badges-item"><span class="c-badge c-badge--success cy-product-flags-free-shipping">Envío gratis</span></div>');return'<div class="c-card-product__badges"> <div class="c-card-product__badges-item"><span class="c-badge c-badge--reacondicionado cy-product-flags-reaconditioned">Promocionado</span> </div>'+t+" </div>"}(a),o=function(a){{if("inStock"===a.data.availability.status)return'<div class="c-product-card__availability disponibilidad-inmediata cy-product-availability-date">Recíbelo '+a.data.deliveryDate.strDate+"</div>";if("inminentReplenishment"===a.data.availability.status||"in2472Hours"===a.data.availability.status||"2472Hours"===a.data.availability.status||"preSale"===a.data.availability.status)return'<div class="c-product-card__availability disponibilidad-moderada cy-product-availability-date">LLegará '+a.data.deliveryDate.strDate+"</div>";if("outOfStock"===a.data.availability.status||"consult"===a.data.availability.status)return'<div class="c-product-card__availability disponibilidad-nula cy-product-availability-date">Sin fecha de entrada</div>'}return""}(a),s=function(a){if(0<a.data.valoration.total)return'<div class="c-star-rating cy-product-rating">    <span class="c-star-rating__text cy-product-text">'+(a.data.valoration.avg/2).toFixed(1)+'</span>    <div class="c-star-rating__icon cy-product-icon">        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" enable-background="new 0 0 24 24"             class="c-icon-svg">            <path d="M21.9 8.6c-.1-.4-.5-.6-.9-.6h-5.4l-2.7-5.4c-.3-.7-1.4-.7-1.8 0L8.4 8H3c-.4 0-.8.2-.9.6-.2.4-.1.8.2 1.1l4.6 4.6L5 20.7c-.1.4 0 .8.4 1.1.3.2.8.3 1.1 0l5.4-3.6 5.4 3.6c.2.1.4.2.6.2.2 0 .4-.1.6-.2.3-.2.5-.7.4-1.1l-1.8-6.4 4.6-4.6c.3-.3.4-.7.2-1.1z"></path>        </svg>    </div>    <span class="c-star-rating__text cy-product-rating-result">'+a.data.valoration.total+" Opiniones</span></div>";return""}(a),n=function(a,t){if(a.data.price.price!==a.data.originalPrice.price&&0<t)return'<div class="c-product-card__prices cy-product-price"> <div class="c-product-card__prices-actual c-product-card__prices-actual--discount cy-product-price-discount"><span>'+a.data.price.price+'€</span></div> <div class="c-product-card__prices-pvp cy-product-price-normal"><span>'+a.data.originalPrice.price+"€</span></div></div>";return'<div class="c-product-card__prices cy-product-price"> <div class="c-product-card__prices-actual cy-product-price-normal"><span>'+a.data.price.price+"€</span></div></div>"}(a,r),l="",p="";0<r&&(l=function(a){return a.data.price.price===a.data.originalPrice.price?"":(discount=Math.floor((a.data.originalPrice.price-a.data.price.price)/a.data.originalPrice.price*100),'<div class="c-product-card__discount cy-product-discount"><span class="c-badge c-badge--discount cy-product-discount-ammount">-'+discount+"%</span></div>")}(a),p=function(a){if(a.data.price.price===a.data.originalPrice.price)return"";var t=0,c=0;a.data.promotions.forEach(function(a){"special-day"!==a.type&&"black-friday"!==a.type||(t=a.data.stock,c=a.data.initialStock)});a=100*t/c;return'<div class="c-stock-bar '+(0===t?"c-stock-bar--out":"")+' cy-product-promotion-stock-bar"><span class="c-stock-bar__text cy-product-promotion-stock-text">'+(0<t?"Quedan "+t+" unidades":"Oferta agotada")+'</span><div class="c-stock-bar__contour cy-product-promotion-stock-progress">'+(0<t?'<div class="c-stock-bar__filling" style="width:'+a+'%"></div>':"")+"</div></div>"}(a));return'<div class="col-xs-6 col-sm-4 col-md-4 col-lg-4">    <article data-list="citrusad" data-name="'+a.data.name+'" data-id='+a.data.idArticle+" data-price="+a.data.price.price+'             data-brand="'+a.data.trademark.name+'" data-category="'+a.data.family.name+'" data-stock-web="1" data-eec-action="impression" data-loop="'+t+'"             class="c-product-card" data-sku='+a.data.idArticle+'>        <div class="c-product-card__wrapper">           <div class="c-product-card__container-image">'+l+c+'       </div>       <div class="c-product-card__content">'+d+i+n+o+s+p+"       </div>"+e+'<div class="c-comparator-check-trigger cy-product-comparator">    <label class="c-input c-checkbox fat">        <input        type="checkbox" class="js-comparator-check-trigger cy-product-comparator-input">        <span class="c-indicator"></span><span class="text">Comparar</span>    </label></div>       </div>    </article> </div>'}(a,i[t]),a=$('*article[data-list="citrusad"][data-loop="'+i[t]+'"]');a.length?a.parent().replaceWith(c):$("#articleListContent > .page-0 > div:nth-child("+i[t]+")").before(c),e++}),i.slice(e).forEach(function(a,t){a=$('*article[data-list="citrusad"][data-loop="'+a+'"]');a.length&&a.parent().remove()}),0<a.length&&a.forEach(function(a){var t;a='<a href="'+(t=a).linkUrl+'" class="banner-a-'+t.slotId.toLowerCase()+'-css banner-ad-citrus" data-adid="'+t.bannerId+'">                <img class="hidden-xs-down col-xs-12 col-sm-12 col-md-12 col-lg-12 banner banner-'+t.slotId.toLowerCase()+'-css" src="'+t.imageUrl+'" alt="'+t.altText+'" />            </a>',"TOP"===t.slotId?$("#async-banner-top-placeholder").replaceWith(a):"MIDDLE"===t.slotId&&(9<(t=$("#articleListContent > .row > div").length)?$("#articleListContent > .page-0 > div:nth-child(9)"):$("#articleListContent > .page-0 > div:nth-child("+t+")")).after(a)}))})}d.$select.prop("selectedIndex",0),$("#div-btmMore").css("visibility","visible"),t.scroll(function(){s.height()-(s.position().top+parseInt(a))<=t.scrollTop()&&l!=r.getPage()&&1<=r.getPage()&&(s.append(p),p=g(!1))}),r.click(function(){g(!0)}),d.change(function(){i||(e.sleep(),r.setPage(0),u("order").done(function(a){s.html(a),v()}).always(function(){e.wakeUp(),PCC.EventManager.emit("observeLazyImages",{module:"Holi"})}))}),v()});