$(document).ready(function(){var t,i=[],s=[];function a(){var t=[];if($(".navegacion-secundaria__migas-de-pan .GTM-breadcumb:last-child").length){for(var a=(a=$(".navegacion-secundaria__migas-de-pan .GTM-breadcumb:last-child").attr("href").split("/"))[a.length-1],c=0;c!=i.length;c++)i[c].lastFamily==a&&t.push(i[c].id);0!=t.length&&function(t){for(var a=0;a!=t.length;a++)$('[content="'+t[a]+'"]').parent().find(".js-comparator-check-trigger").prop("checked",!0)}(t)}}function l(t){if(t){for(var a=0;a<i.length;a++)if(i[a].id==t){i.splice(a,1);break}i=d(i),localStorage.setItem("comparatorIds",JSON.stringify(i)),s=0!=i.length?i[i.length-1].lastFamily:[],localStorage.setItem("lastFamily",JSON.stringify(s)),n(i)}}function n(t){for(var a=t,c="",e=0;e!=a.length;e++)c+='<li class="c-comparator__selected-list-item"><i class="c-close c-close--comparator-mini-card js-close--comparator-bottom-sticky" data-id='+a[e].id+'></i><figure class="c-comparator-card c-comparator-card--mini"><a href="'+a[e].articleURL+'"><img class="c-comparator-cell__img c-comparator-cell__img--selected" alt="#" src="'+a[e].articleImg+'"></a><figcaption class="c-comparator-cell__title c-comparator-cell__title--selected"><a href="'+a[e].articleURL+'">'+a[e].articleName+"</a></figcaption></figure></li>";0==a.length&&$(".js-sticky-selected").hide(),a.length<2?$(".js-comparator-compare-button").prop("disabled",!0):$(".js-comparator-compare-button").prop("disabled",!1),$(".js-comparator__trigger-quantity").html(a.length),$(".js-comparator__selected-list").html(c).css("width",196*$(".js-comparator__selected-list").find(".c-comparator__selected-list-item").length)}function d(t){function a(t,a){return t.id==a.id?t.articleName<a.articleName?-1:t.articleName>a.articleName?1:0:t.id<a.id?-1:1}t.sort(a);for(var c=0;c<t.length-1;++c)0===a(t[c],t[c+1])&&t.splice(c,1);return t}localStorage.getItem("comparatorIds")&&0!=JSON.parse(localStorage.getItem("comparatorIds")).length?(t=localStorage.getItem("comparatorIds"),n(i=d(JSON.parse(t))),$(".js-sticky-selected").show()):$(".js-sticky-selected").hide(),a(),$(document).on("change",".js-comparator-check-trigger",function(){var t=$(this).is(":checked"),a=($(this).parents(".c-product-card").data("sku"),$(this).parents(".c-product-card").children().find(".c-product-card__image").first().attr("src")),c=$(this).parents(".c-product-card").data("name"),e=$(this).parents(".c-product-card").find(".c-product-card__title-link").first().attr("href"),r=$(this).parents(".c-product-card").data("sku"),a=$(this).parents(".c-product-card").children().find(".c-product-card__image").first().attr("src"),c=$(this).parents(".c-product-card").data("name"),e=$(this).parents(".c-product-card").find(".c-product-card__title-link").first().attr("href"),o=window.location.href.split("/").pop();t?(t=c,c=a,a=e,e=o,(o=r)&&(i.push({id:o,articleName:t,articleImg:c,articleURL:a,lastFamily:e}),i=d(i),s=e,localStorage.setItem("comparatorIds",JSON.stringify(i)),localStorage.setItem("lastFamily",JSON.stringify(s)),n(i)),$(".js-sticky-selected").show()):l(r)}),$(document).on("click",".js-close--comparator-bottom-sticky",function(){l($(this).data("id")),$(this).parents(".c-comparator__selected-list-item").fadeOut()}),$(document).on("click",".c-comparator-tool-link--remove-all",function(){i=[],localStorage.setItem("comparatorIds",JSON.stringify(i)),s=[],localStorage.setItem("lastFamily",JSON.stringify(s)),n(i),$("input:checkbox.js-comparator-check-trigger").prop("checked",!1),$(".js-sticky-selected").hide()}),$(".c-comparator__slider-prev").click(function(){$(".c-comparator__selected-list-holder").animate({scrollLeft:"-=196"},200,"linear")}),$(".c-comparator__slider-next").click(function(){$(".c-comparator__selected-list-holder").animate({scrollLeft:"+=196"},200,"linear")}),$(".js-comparator-bar-close").click(function(){$(this).parents(".js-sticky-selected").fadeOut()}),$(".js-comparator-compare-button").click(function(){location.port||location.protocol;window.location.href=window.location=window.location.pathname+"/comparador"});var c=document.querySelector("#articleListContent");c&&"undefined"!=typeof MutationObserver&&new MutationObserver(function(t){t.forEach(function(t){"childList"==t.type&&a()})}).observe(c,{attributes:!1,childList:!0,characterData:!1})});